
#include <stdio.h>
#include <stdint.h>
#include <stdlib.h>

typedef uint32_t Word;
typedef struct {
  Word* data;
  Word index;
  Word ref;
  size_t size;
} Net;

Word Wire(Word node, Word port) { return (node << 2) | port; }
Word node(Word wire) { return wire >> 2; }
Word port(Word wire) { return wire & 3; }
Word flip(Net* net, Word wire) { return net->data[node(wire) * 4 + port(wire)]; }
Word Node(Net* net, Word kind) {
  //printf("%d %d\n", net->index, net->size);
  Word node = net->index / 4;
  net->data[node * 4 + 0] = Wire(node, 0);
  net->data[node * 4 + 1] = Wire(node, 1);
  net->data[node * 4 + 2] = Wire(node, 2);
  net->data[node * 4 + 3] = kind << 3;
  net->index += 4;
  //printf("ok\n");
  return node;
}
Word kind(Net* net, Word node) { return net->data[node * 4 + 3] >> 3; }
Word quit(Net* net, Word node) { return (net->data[node * 4 + 3] >> 1) & 3; }
Word used(Net* net, Word node) { return net->data[node * 4 + 3] & 1; }
void setQuit(Net* net, Word node, Word quit) { net->data[node * 4 + 3] = (net->data[node * 4 + 3] & 0xFFFFFFF9) | (quit << 1); }
void setUsed(Net* net, Word node) { net->data[node * 4 + 3] = net->data[node * 4 + 3] | 1; }
void link(Net* net, Word a, Word b) { net->data[node(a) * 4 + port(a)] = b; net->data[node(b) * 4 + port(b)] = a; }
void rewrite(Net* net, Word x, Word y) {
  if (kind(net,x) == kind(net,y)) {
    link(net, flip(net,Wire(x,1)), flip(net,Wire(y,1)));
    link(net, flip(net,Wire(x,2)), flip(net,Wire(y,2)));
  } else {
    Word x1 = Node(net,kind(net,x));
    Word x2 = Node(net,kind(net,x));
    Word y1 = Node(net,kind(net,y));
    Word y2 = Node(net,kind(net,y));
    link(net, flip(net,Wire(y1,0)), flip(net,Wire(x,1)));
    link(net, flip(net,Wire(y2,0)), flip(net,Wire(x,2)));
    link(net, flip(net,Wire(x1,0)), flip(net,Wire(y,1)));
    link(net, flip(net,Wire(x2,0)), flip(net,Wire(y,2)));
    link(net, flip(net,Wire(x1,1)), flip(net,Wire(y1,1)));
    link(net, flip(net,Wire(x1,2)), flip(net,Wire(y2,1)));
    link(net, flip(net,Wire(x2,1)), flip(net,Wire(y1,2)));
    link(net, flip(net,Wire(x2,2)), flip(net,Wire(y2,2)));
  }
}
void reduce(Net* net) {
  Word visit[1024];
  Word prev, next, back, visitLength, steps;
  visit[0] = net->ref;
  visitLength = 1;
  steps = 0;
  while (visitLength > 0) {
    prev = visit[--visitLength];
    next = flip(net, prev);
    prev = flip(net, next);
    if (used(net, node(prev)))
      continue;
    if (port(prev) == 0) {
      if (port(next) == 0 && !(node(next) == node(prev))){ 
        back = flip(net, Wire(node(next), quit(net,node(next))));
        rewrite(net, node(next), node(prev));
        visit[visitLength++] = flip(net, back);
      } else {
        setUsed(net, node(prev));
        visit[visitLength++] = flip(net, Wire(node(prev),2));
        visit[visitLength++] = flip(net, Wire(node(prev),1));
      };
    } else {
      setQuit(net, node(prev), port(prev));
      visit[visitLength++] = flip(net, Wire(node(prev),0));
    }
    ++steps;
  }
}

void reduce_(Net* net) {
  Word p, n, x, y, x1, x2, y1, y2, z, a, b;
  Word* m = net->data;
  Word* M = &net->index;
  Word v[1024];
  Word V = 1;
  v[0] = net->ref;
  while (V > 0) {
    p = v[--V];
    n = m[p];
    p = m[n];
    x = n >> 2;
    y = p >> 2;
    if (m[y*4+3] & 1)
      continue;
    if ((p & 3) == 0) {
      if ((n & 3) == 0 && x != y) { 
        z = m[n + ((m[x * 4 + 3] >> 1) & 3)];
        if ((m[x*4+3]>>3) == (m[y*4+3]>>3)){
          a = m[x*4+1], b = m[y*4+1], m[a] = b, m[b] = a;
          a = m[x*4+2], b = m[y*4+2], m[a] = b, m[b] = a;
        } else {
          x1 = (*M += 4) / 4 - 1;
          x2 = (*M += 4) / 4 - 1;
          y1 = (*M += 4) / 4 - 1;
          y2 = (*M += 4) / 4 - 1;
          m[x1*4+0] = x1*4+0;
          m[x1*4+1] = x1*4+1;
          m[x1*4+2] = x1*4+2;
          m[x1*4+3] = m[x*4+3] & 0xFFFFFFF8;
          m[x2*4+0] = x2*4+0;
          m[x2*4+1] = x2*4+1;
          m[x2*4+2] = x2*4+2;
          m[x2*4+3] = m[x*4+3] & 0xFFFFFFF8;
          m[y1*4+0] = y1*4+0;
          m[y1*4+1] = y1*4+1;
          m[y1*4+2] = y1*4+2;
          m[y1*4+3] = m[y*4+3] & 0xFFFFFFF8;
          m[y2*4+0] = y2*4+0;
          m[y2*4+1] = y2*4+1;
          m[y2*4+2] = y2*4+2;
          m[y2*4+3] = m[y*4+3] & 0xFFFFFFF8;
          a = m[y1*4+0], b = m[x*4+1], m[a] = b, m[b] = a;
          a = m[y2*4+0], b = m[x*4+2], m[a] = b, m[b] = a;
          a = m[x1*4+0], b = m[y*4+1], m[a] = b, m[b] = a;
          a = m[x2*4+0], b = m[y*4+2], m[a] = b, m[b] = a;
          a = m[x1*4+1], b = m[y1*4+1], m[a] = b, m[b] = a;
          a = m[x1*4+2], b = m[y2*4+1], m[a] = b, m[b] = a;
          a = m[x2*4+1], b = m[y1*4+2], m[a] = b, m[b] = a;
          a = m[x2*4+2], b = m[y2*4+2], m[a] = b, m[b] = a;
        }
        v[V++] = m[z];
      } else {
        m[(p >> 2) * 4 + 3] = m[(p >> 2) * 4 + 3] | 1;
        v[V++] = m[p | 2];
        v[V++] = m[p | 1];
      };
    } else {
      m[(p >> 2) * 4 + 3] = (m[(p >> 2) * 4 + 3] & 0xFFFFFFF9) | ((p & 3) << 1);
      v[V++] = m[(p >> 2) * 4 + 0];
    }
  }
}

Net makeNet(Word netSize, Word* init, Word initSize) {
  Net net;
  net.ref = 2;
  net.index = initSize;
  net.size = netSize;
  net.data = malloc(sizeof(Word) * netSize);
  for (int i = 0; i < initSize; ++i) {
    net.data[i] = init[i];
  }
  return net;
}

Word checksum(Net* net) {
  int sum = 0;
  for (int i = 0; i < net->index; ++i) {
    sum = (sum + net->data[i]) % 65536;
  }
  return sum;
}

void printNet(Net* net) {
  for (int i = 0; i < net->index; ++i) {
    printf("%d ", net->data[i]);
  }
}

int main() {
  Word init[] = {6,5456,2,8,10,124,0,8,12,88,4,8,8,84,20,8,13,18,17,0,14,81,30,8,21,26,25,0,37,34,22,8,38,42,29,8,45,28,32,16,46,50,33,8,53,36,40,24,54,58,41,8,61,44,48,32,62,66,49,8,69,52,56,40,70,74,57,8,77,60,64,48,78,82,65,8,85,68,72,56,86,21,73,8,13,76,80,64,9,120,96,8,89,94,93,0,90,117,106,8,97,102,101,0,113,110,98,8,114,118,105,8,121,104,108,72,122,97,109,8,89,112,116,80,5,132,134,8,125,130,129,0,125,136,126,8,133,5452,144,8,137,142,141,0,138,5448,152,8,145,150,149,0,146,972,160,8,153,158,157,0,154,968,168,8,161,166,165,0,162,1612,176,8,169,174,173,0,170,1608,184,8,177,182,181,0,178,2252,192,8,185,190,189,0,186,2248,200,8,193,198,197,0,194,2892,208,8,201,206,205,0,202,2888,216,8,209,214,213,0,210,3532,224,8,217,222,221,0,218,3528,232,8,225,230,229,0,226,4172,240,8,233,238,237,0,234,4168,248,8,241,246,245,0,242,4812,256,8,249,254,253,0,250,4808,264,8,257,262,261,0,258,332,274,8,265,270,269,0,278,5134,266,8,282,4818,272,8,286,4494,276,8,290,4178,280,8,294,3854,284,8,298,3538,288,8,302,3214,292,8,306,2898,296,8,310,2574,300,8,314,2258,304,8,318,1934,308,8,322,1618,312,8,326,1294,316,8,330,978,320,8,334,654,324,8,265,338,328,8,342,969,333,8,344,973,336,8,340,372,352,8,345,350,349,0,346,361,362,8,353,358,357,0,366,353,354,8,370,560,360,8,374,468,364,8,345,376,368,8,373,392,386,8,377,382,381,0,390,444,378,8,394,420,384,8,377,396,388,8,393,400,404,8,397,402,401,0,398,414,412,8,405,410,409,0,406,416,405,8,413,418,417,0,389,424,428,8,421,426,425,0,422,432,436,8,429,434,433,0,430,438,437,8,437,442,441,0,385,462,452,8,445,450,449,0,446,456,460,8,453,458,457,0,454,464,445,8,461,466,465,0,369,484,478,8,469,474,473,0,482,536,470,8,486,512,476,8,469,488,480,8,485,506,496,8,489,494,493,0,490,500,504,8,497,502,501,0,498,508,489,8,505,510,509,0,481,530,520,8,513,518,517,0,514,524,528,8,521,526,525,0,522,532,513,8,529,534,533,0,477,540,544,8,537,542,541,0,538,554,552,8,545,550,549,0,546,556,545,8,553,558,557,0,365,576,570,8,561,566,565,0,574,628,562,8,578,604,568,8,561,580,572,8,577,584,588,8,581,586,585,0,582,598,596,8,589,594,593,0,590,600,589,8,597,602,601,0,573,608,612,8,605,610,609,0,606,616,620,8,613,618,617,0,614,622,621,8,621,626,625,0,569,632,636,8,629,634,633,0,630,640,644,8,637,642,641,0,638,646,645,8,645,650,649,0,658,974,329,8,660,970,652,8,656,688,668,8,661,666,665,0,662,677,678,8,669,674,673,0,682,669,670,8,686,876,676,8,690,784,680,8,661,692,684,8,689,708,702,8,693,698,697,0,706,760,694,8,710,736,700,8,693,712,704,8,709,716,720,8,713,718,717,0,714,730,728,8,721,726,725,0,722,732,721,8,729,734,733,0,705,740,744,8,737,742,741,0,738,748,752,8,745,750,749,0,746,754,753,8,753,758,757,0,701,778,768,8,761,766,765,0,762,772,776,8,769,774,773,0,770,780,761,8,777,782,781,0,685,800,794,8,785,790,789,0,798,852,786,8,802,828,792,8,785,804,796,8,801,822,812,8,805,810,809,0,806,816,820,8,813,818,817,0,814,824,805,8,821,826,825,0,797,846,836,8,829,834,833,0,830,840,844,8,837,842,841,0,838,848,829,8,845,850,849,0,793,856,860,8,853,858,857,0,854,870,868,8,861,866,865,0,862,872,861,8,869,874,873,0,681,892,886,8,877,882,881,0,890,944,878,8,894,920,884,8,877,896,888,8,893,900,904,8,897,902,901,0,898,914,912,8,905,910,909,0,906,916,905,8,913,918,917,0,889,924,928,8,921,926,925,0,922,932,936,8,929,934,933,0,930,938,937,8,937,942,941,0,885,948,952,8,945,950,949,0,946,956,960,8,953,958,957,0,954,962,961,8,961,966,965,0,161,337,657,88,153,341,653,96,982,1609,325,8,984,1613,976,8,980,1012,992,8,985,990,989,0,986,1001,1002,8,993,998,997,0,1006,993,994,8,1010,1200,1000,8,1014,1108,1004,8,985,1016,1008,8,1013,1032,1026,8,1017,1022,1021,0,1030,1084,1018,8,1034,1060,1024,8,1017,1036,1028,8,1033,1040,1044,8,1037,1042,1041,0,1038,1054,1052,8,1045,1050,1049,0,1046,1056,1045,8,1053,1058,1057,0,1029,1064,1068,8,1061,1066,1065,0,1062,1072,1076,8,1069,1074,1073,0,1070,1078,1077,8,1077,1082,1081,0,1025,1102,1092,8,1085,1090,1089,0,1086,1096,1100,8,1093,1098,1097,0,1094,1104,1085,8,1101,1106,1105,0,1009,1124,1118,8,1109,1114,1113,0,1122,1176,1110,8,1126,1152,1116,8,1109,1128,1120,8,1125,1146,1136,8,1129,1134,1133,0,1130,1140,1144,8,1137,1142,1141,0,1138,1148,1129,8,1145,1150,1149,0,1121,1170,1160,8,1153,1158,1157,0,1154,1164,1168,8,1161,1166,1165,0,1162,1172,1153,8,1169,1174,1173,0,1117,1180,1184,8,1177,1182,1181,0,1178,1194,1192,8,1185,1190,1189,0,1186,1196,1185,8,1193,1198,1197,0,1005,1216,1210,8,1201,1206,1205,0,1214,1268,1202,8,1218,1244,1208,8,1201,1220,1212,8,1217,1224,1228,8,1221,1226,1225,0,1222,1238,1236,8,1229,1234,1233,0,1230,1240,1229,8,1237,1242,1241,0,1213,1248,1252,8,1245,1250,1249,0,1246,1256,1260,8,1253,1258,1257,0,1254,1262,1261,8,1261,1266,1265,0,1209,1272,1276,8,1269,1274,1273,0,1270,1280,1284,8,1277,1282,1281,0,1278,1286,1285,8,1285,1290,1289,0,1298,1614,321,8,1300,1610,1292,8,1296,1328,1308,8,1301,1306,1305,0,1302,1317,1318,8,1309,1314,1313,0,1322,1309,1310,8,1326,1516,1316,8,1330,1424,1320,8,1301,1332,1324,8,1329,1348,1342,8,1333,1338,1337,0,1346,1400,1334,8,1350,1376,1340,8,1333,1352,1344,8,1349,1356,1360,8,1353,1358,1357,0,1354,1370,1368,8,1361,1366,1365,0,1362,1372,1361,8,1369,1374,1373,0,1345,1380,1384,8,1377,1382,1381,0,1378,1388,1392,8,1385,1390,1389,0,1386,1394,1393,8,1393,1398,1397,0,1341,1418,1408,8,1401,1406,1405,0,1402,1412,1416,8,1409,1414,1413,0,1410,1420,1401,8,1417,1422,1421,0,1325,1440,1434,8,1425,1430,1429,0,1438,1492,1426,8,1442,1468,1432,8,1425,1444,1436,8,1441,1462,1452,8,1445,1450,1449,0,1446,1456,1460,8,1453,1458,1457,0,1454,1464,1445,8,1461,1466,1465,0,1437,1486,1476,8,1469,1474,1473,0,1470,1480,1484,8,1477,1482,1481,0,1478,1488,1469,8,1485,1490,1489,0,1433,1496,1500,8,1493,1498,1497,0,1494,1510,1508,8,1501,1506,1505,0,1502,1512,1501,8,1509,1514,1513,0,1321,1532,1526,8,1517,1522,1521,0,1530,1584,1518,8,1534,1560,1524,8,1517,1536,1528,8,1533,1540,1544,8,1537,1542,1541,0,1538,1554,1552,8,1545,1550,1549,0,1546,1556,1545,8,1553,1558,1557,0,1529,1564,1568,8,1561,1566,1565,0,1562,1572,1576,8,1569,1574,1573,0,1570,1578,1577,8,1577,1582,1581,0,1525,1588,1592,8,1585,1590,1589,0,1586,1596,1600,8,1593,1598,1597,0,1594,1602,1601,8,1601,1606,1605,0,177,977,1297,104,169,981,1293,112,1622,2249,317,8,1624,2253,1616,8,1620,1652,1632,8,1625,1630,1629,0,1626,1641,1642,8,1633,1638,1637,0,1646,1633,1634,8,1650,1840,1640,8,1654,1748,1644,8,1625,1656,1648,8,1653,1672,1666,8,1657,1662,1661,0,1670,1724,1658,8,1674,1700,1664,8,1657,1676,1668,8,1673,1680,1684,8,1677,1682,1681,0,1678,1694,1692,8,1685,1690,1689,0,1686,1696,1685,8,1693,1698,1697,0,1669,1704,1708,8,1701,1706,1705,0,1702,1712,1716,8,1709,1714,1713,0,1710,1718,1717,8,1717,1722,1721,0,1665,1742,1732,8,1725,1730,1729,0,1726,1736,1740,8,1733,1738,1737,0,1734,1744,1725,8,1741,1746,1745,0,1649,1764,1758,8,1749,1754,1753,0,1762,1816,1750,8,1766,1792,1756,8,1749,1768,1760,8,1765,1786,1776,8,1769,1774,1773,0,1770,1780,1784,8,1777,1782,1781,0,1778,1788,1769,8,1785,1790,1789,0,1761,1810,1800,8,1793,1798,1797,0,1794,1804,1808,8,1801,1806,1805,0,1802,1812,1793,8,1809,1814,1813,0,1757,1820,1824,8,1817,1822,1821,0,1818,1834,1832,8,1825,1830,1829,0,1826,1836,1825,8,1833,1838,1837,0,1645,1856,1850,8,1841,1846,1845,0,1854,1908,1842,8,1858,1884,1848,8,1841,1860,1852,8,1857,1864,1868,8,1861,1866,1865,0,1862,1878,1876,8,1869,1874,1873,0,1870,1880,1869,8,1877,1882,1881,0,1853,1888,1892,8,1885,1890,1889,0,1886,1896,1900,8,1893,1898,1897,0,1894,1902,1901,8,1901,1906,1905,0,1849,1912,1916,8,1909,1914,1913,0,1910,1920,1924,8,1917,1922,1921,0,1918,1926,1925,8,1925,1930,1929,0,1938,2254,313,8,1940,2250,1932,8,1936,1968,1948,8,1941,1946,1945,0,1942,1957,1958,8,1949,1954,1953,0,1962,1949,1950,8,1966,2156,1956,8,1970,2064,1960,8,1941,1972,1964,8,1969,1988,1982,8,1973,1978,1977,0,1986,2040,1974,8,1990,2016,1980,8,1973,1992,1984,8,1989,1996,2000,8,1993,1998,1997,0,1994,2010,2008,8,2001,2006,2005,0,2002,2012,2001,8,2009,2014,2013,0,1985,2020,2024,8,2017,2022,2021,0,2018,2028,2032,8,2025,2030,2029,0,2026,2034,2033,8,2033,2038,2037,0,1981,2058,2048,8,2041,2046,2045,0,2042,2052,2056,8,2049,2054,2053,0,2050,2060,2041,8,2057,2062,2061,0,1965,2080,2074,8,2065,2070,2069,0,2078,2132,2066,8,2082,2108,2072,8,2065,2084,2076,8,2081,2102,2092,8,2085,2090,2089,0,2086,2096,2100,8,2093,2098,2097,0,2094,2104,2085,8,2101,2106,2105,0,2077,2126,2116,8,2109,2114,2113,0,2110,2120,2124,8,2117,2122,2121,0,2118,2128,2109,8,2125,2130,2129,0,2073,2136,2140,8,2133,2138,2137,0,2134,2150,2148,8,2141,2146,2145,0,2142,2152,2141,8,2149,2154,2153,0,1961,2172,2166,8,2157,2162,2161,0,2170,2224,2158,8,2174,2200,2164,8,2157,2176,2168,8,2173,2180,2184,8,2177,2182,2181,0,2178,2194,2192,8,2185,2190,2189,0,2186,2196,2185,8,2193,2198,2197,0,2169,2204,2208,8,2201,2206,2205,0,2202,2212,2216,8,2209,2214,2213,0,2210,2218,2217,8,2217,2222,2221,0,2165,2228,2232,8,2225,2230,2229,0,2226,2236,2240,8,2233,2238,2237,0,2234,2242,2241,8,2241,2246,2245,0,193,1617,1937,120,185,1621,1933,128,2262,2889,309,8,2264,2893,2256,8,2260,2292,2272,8,2265,2270,2269,0,2266,2281,2282,8,2273,2278,2277,0,2286,2273,2274,8,2290,2480,2280,8,2294,2388,2284,8,2265,2296,2288,8,2293,2312,2306,8,2297,2302,2301,0,2310,2364,2298,8,2314,2340,2304,8,2297,2316,2308,8,2313,2320,2324,8,2317,2322,2321,0,2318,2334,2332,8,2325,2330,2329,0,2326,2336,2325,8,2333,2338,2337,0,2309,2344,2348,8,2341,2346,2345,0,2342,2352,2356,8,2349,2354,2353,0,2350,2358,2357,8,2357,2362,2361,0,2305,2382,2372,8,2365,2370,2369,0,2366,2376,2380,8,2373,2378,2377,0,2374,2384,2365,8,2381,2386,2385,0,2289,2404,2398,8,2389,2394,2393,0,2402,2456,2390,8,2406,2432,2396,8,2389,2408,2400,8,2405,2426,2416,8,2409,2414,2413,0,2410,2420,2424,8,2417,2422,2421,0,2418,2428,2409,8,2425,2430,2429,0,2401,2450,2440,8,2433,2438,2437,0,2434,2444,2448,8,2441,2446,2445,0,2442,2452,2433,8,2449,2454,2453,0,2397,2460,2464,8,2457,2462,2461,0,2458,2474,2472,8,2465,2470,2469,0,2466,2476,2465,8,2473,2478,2477,0,2285,2496,2490,8,2481,2486,2485,0,2494,2548,2482,8,2498,2524,2488,8,2481,2500,2492,8,2497,2504,2508,8,2501,2506,2505,0,2502,2518,2516,8,2509,2514,2513,0,2510,2520,2509,8,2517,2522,2521,0,2493,2528,2532,8,2525,2530,2529,0,2526,2536,2540,8,2533,2538,2537,0,2534,2542,2541,8,2541,2546,2545,0,2489,2552,2556,8,2549,2554,2553,0,2550,2560,2564,8,2557,2562,2561,0,2558,2566,2565,8,2565,2570,2569,0,2578,2894,305,8,2580,2890,2572,8,2576,2608,2588,8,2581,2586,2585,0,2582,2597,2598,8,2589,2594,2593,0,2602,2589,2590,8,2606,2796,2596,8,2610,2704,2600,8,2581,2612,2604,8,2609,2628,2622,8,2613,2618,2617,0,2626,2680,2614,8,2630,2656,2620,8,2613,2632,2624,8,2629,2636,2640,8,2633,2638,2637,0,2634,2650,2648,8,2641,2646,2645,0,2642,2652,2641,8,2649,2654,2653,0,2625,2660,2664,8,2657,2662,2661,0,2658,2668,2672,8,2665,2670,2669,0,2666,2674,2673,8,2673,2678,2677,0,2621,2698,2688,8,2681,2686,2685,0,2682,2692,2696,8,2689,2694,2693,0,2690,2700,2681,8,2697,2702,2701,0,2605,2720,2714,8,2705,2710,2709,0,2718,2772,2706,8,2722,2748,2712,8,2705,2724,2716,8,2721,2742,2732,8,2725,2730,2729,0,2726,2736,2740,8,2733,2738,2737,0,2734,2744,2725,8,2741,2746,2745,0,2717,2766,2756,8,2749,2754,2753,0,2750,2760,2764,8,2757,2762,2761,0,2758,2768,2749,8,2765,2770,2769,0,2713,2776,2780,8,2773,2778,2777,0,2774,2790,2788,8,2781,2786,2785,0,2782,2792,2781,8,2789,2794,2793,0,2601,2812,2806,8,2797,2802,2801,0,2810,2864,2798,8,2814,2840,2804,8,2797,2816,2808,8,2813,2820,2824,8,2817,2822,2821,0,2818,2834,2832,8,2825,2830,2829,0,2826,2836,2825,8,2833,2838,2837,0,2809,2844,2848,8,2841,2846,2845,0,2842,2852,2856,8,2849,2854,2853,0,2850,2858,2857,8,2857,2862,2861,0,2805,2868,2872,8,2865,2870,2869,0,2866,2876,2880,8,2873,2878,2877,0,2874,2882,2881,8,2881,2886,2885,0,209,2257,2577,136,201,2261,2573,144,2902,3529,301,8,2904,3533,2896,8,2900,2932,2912,8,2905,2910,2909,0,2906,2921,2922,8,2913,2918,2917,0,2926,2913,2914,8,2930,3120,2920,8,2934,3028,2924,8,2905,2936,2928,8,2933,2952,2946,8,2937,2942,2941,0,2950,3004,2938,8,2954,2980,2944,8,2937,2956,2948,8,2953,2960,2964,8,2957,2962,2961,0,2958,2974,2972,8,2965,2970,2969,0,2966,2976,2965,8,2973,2978,2977,0,2949,2984,2988,8,2981,2986,2985,0,2982,2992,2996,8,2989,2994,2993,0,2990,2998,2997,8,2997,3002,3001,0,2945,3022,3012,8,3005,3010,3009,0,3006,3016,3020,8,3013,3018,3017,0,3014,3024,3005,8,3021,3026,3025,0,2929,3044,3038,8,3029,3034,3033,0,3042,3096,3030,8,3046,3072,3036,8,3029,3048,3040,8,3045,3066,3056,8,3049,3054,3053,0,3050,3060,3064,8,3057,3062,3061,0,3058,3068,3049,8,3065,3070,3069,0,3041,3090,3080,8,3073,3078,3077,0,3074,3084,3088,8,3081,3086,3085,0,3082,3092,3073,8,3089,3094,3093,0,3037,3100,3104,8,3097,3102,3101,0,3098,3114,3112,8,3105,3110,3109,0,3106,3116,3105,8,3113,3118,3117,0,2925,3136,3130,8,3121,3126,3125,0,3134,3188,3122,8,3138,3164,3128,8,3121,3140,3132,8,3137,3144,3148,8,3141,3146,3145,0,3142,3158,3156,8,3149,3154,3153,0,3150,3160,3149,8,3157,3162,3161,0,3133,3168,3172,8,3165,3170,3169,0,3166,3176,3180,8,3173,3178,3177,0,3174,3182,3181,8,3181,3186,3185,0,3129,3192,3196,8,3189,3194,3193,0,3190,3200,3204,8,3197,3202,3201,0,3198,3206,3205,8,3205,3210,3209,0,3218,3534,297,8,3220,3530,3212,8,3216,3248,3228,8,3221,3226,3225,0,3222,3237,3238,8,3229,3234,3233,0,3242,3229,3230,8,3246,3436,3236,8,3250,3344,3240,8,3221,3252,3244,8,3249,3268,3262,8,3253,3258,3257,0,3266,3320,3254,8,3270,3296,3260,8,3253,3272,3264,8,3269,3276,3280,8,3273,3278,3277,0,3274,3290,3288,8,3281,3286,3285,0,3282,3292,3281,8,3289,3294,3293,0,3265,3300,3304,8,3297,3302,3301,0,3298,3308,3312,8,3305,3310,3309,0,3306,3314,3313,8,3313,3318,3317,0,3261,3338,3328,8,3321,3326,3325,0,3322,3332,3336,8,3329,3334,3333,0,3330,3340,3321,8,3337,3342,3341,0,3245,3360,3354,8,3345,3350,3349,0,3358,3412,3346,8,3362,3388,3352,8,3345,3364,3356,8,3361,3382,3372,8,3365,3370,3369,0,3366,3376,3380,8,3373,3378,3377,0,3374,3384,3365,8,3381,3386,3385,0,3357,3406,3396,8,3389,3394,3393,0,3390,3400,3404,8,3397,3402,3401,0,3398,3408,3389,8,3405,3410,3409,0,3353,3416,3420,8,3413,3418,3417,0,3414,3430,3428,8,3421,3426,3425,0,3422,3432,3421,8,3429,3434,3433,0,3241,3452,3446,8,3437,3442,3441,0,3450,3504,3438,8,3454,3480,3444,8,3437,3456,3448,8,3453,3460,3464,8,3457,3462,3461,0,3458,3474,3472,8,3465,3470,3469,0,3466,3476,3465,8,3473,3478,3477,0,3449,3484,3488,8,3481,3486,3485,0,3482,3492,3496,8,3489,3494,3493,0,3490,3498,3497,8,3497,3502,3501,0,3445,3508,3512,8,3505,3510,3509,0,3506,3516,3520,8,3513,3518,3517,0,3514,3522,3521,8,3521,3526,3525,0,225,2897,3217,152,217,2901,3213,160,3542,4169,293,8,3544,4173,3536,8,3540,3572,3552,8,3545,3550,3549,0,3546,3561,3562,8,3553,3558,3557,0,3566,3553,3554,8,3570,3760,3560,8,3574,3668,3564,8,3545,3576,3568,8,3573,3592,3586,8,3577,3582,3581,0,3590,3644,3578,8,3594,3620,3584,8,3577,3596,3588,8,3593,3600,3604,8,3597,3602,3601,0,3598,3614,3612,8,3605,3610,3609,0,3606,3616,3605,8,3613,3618,3617,0,3589,3624,3628,8,3621,3626,3625,0,3622,3632,3636,8,3629,3634,3633,0,3630,3638,3637,8,3637,3642,3641,0,3585,3662,3652,8,3645,3650,3649,0,3646,3656,3660,8,3653,3658,3657,0,3654,3664,3645,8,3661,3666,3665,0,3569,3684,3678,8,3669,3674,3673,0,3682,3736,3670,8,3686,3712,3676,8,3669,3688,3680,8,3685,3706,3696,8,3689,3694,3693,0,3690,3700,3704,8,3697,3702,3701,0,3698,3708,3689,8,3705,3710,3709,0,3681,3730,3720,8,3713,3718,3717,0,3714,3724,3728,8,3721,3726,3725,0,3722,3732,3713,8,3729,3734,3733,0,3677,3740,3744,8,3737,3742,3741,0,3738,3754,3752,8,3745,3750,3749,0,3746,3756,3745,8,3753,3758,3757,0,3565,3776,3770,8,3761,3766,3765,0,3774,3828,3762,8,3778,3804,3768,8,3761,3780,3772,8,3777,3784,3788,8,3781,3786,3785,0,3782,3798,3796,8,3789,3794,3793,0,3790,3800,3789,8,3797,3802,3801,0,3773,3808,3812,8,3805,3810,3809,0,3806,3816,3820,8,3813,3818,3817,0,3814,3822,3821,8,3821,3826,3825,0,3769,3832,3836,8,3829,3834,3833,0,3830,3840,3844,8,3837,3842,3841,0,3838,3846,3845,8,3845,3850,3849,0,3858,4174,289,8,3860,4170,3852,8,3856,3888,3868,8,3861,3866,3865,0,3862,3877,3878,8,3869,3874,3873,0,3882,3869,3870,8,3886,4076,3876,8,3890,3984,3880,8,3861,3892,3884,8,3889,3908,3902,8,3893,3898,3897,0,3906,3960,3894,8,3910,3936,3900,8,3893,3912,3904,8,3909,3916,3920,8,3913,3918,3917,0,3914,3930,3928,8,3921,3926,3925,0,3922,3932,3921,8,3929,3934,3933,0,3905,3940,3944,8,3937,3942,3941,0,3938,3948,3952,8,3945,3950,3949,0,3946,3954,3953,8,3953,3958,3957,0,3901,3978,3968,8,3961,3966,3965,0,3962,3972,3976,8,3969,3974,3973,0,3970,3980,3961,8,3977,3982,3981,0,3885,4000,3994,8,3985,3990,3989,0,3998,4052,3986,8,4002,4028,3992,8,3985,4004,3996,8,4001,4022,4012,8,4005,4010,4009,0,4006,4016,4020,8,4013,4018,4017,0,4014,4024,4005,8,4021,4026,4025,0,3997,4046,4036,8,4029,4034,4033,0,4030,4040,4044,8,4037,4042,4041,0,4038,4048,4029,8,4045,4050,4049,0,3993,4056,4060,8,4053,4058,4057,0,4054,4070,4068,8,4061,4066,4065,0,4062,4072,4061,8,4069,4074,4073,0,3881,4092,4086,8,4077,4082,4081,0,4090,4144,4078,8,4094,4120,4084,8,4077,4096,4088,8,4093,4100,4104,8,4097,4102,4101,0,4098,4114,4112,8,4105,4110,4109,0,4106,4116,4105,8,4113,4118,4117,0,4089,4124,4128,8,4121,4126,4125,0,4122,4132,4136,8,4129,4134,4133,0,4130,4138,4137,8,4137,4142,4141,0,4085,4148,4152,8,4145,4150,4149,0,4146,4156,4160,8,4153,4158,4157,0,4154,4162,4161,8,4161,4166,4165,0,241,3537,3857,168,233,3541,3853,176,4182,4809,285,8,4184,4813,4176,8,4180,4212,4192,8,4185,4190,4189,0,4186,4201,4202,8,4193,4198,4197,0,4206,4193,4194,8,4210,4400,4200,8,4214,4308,4204,8,4185,4216,4208,8,4213,4232,4226,8,4217,4222,4221,0,4230,4284,4218,8,4234,4260,4224,8,4217,4236,4228,8,4233,4240,4244,8,4237,4242,4241,0,4238,4254,4252,8,4245,4250,4249,0,4246,4256,4245,8,4253,4258,4257,0,4229,4264,4268,8,4261,4266,4265,0,4262,4272,4276,8,4269,4274,4273,0,4270,4278,4277,8,4277,4282,4281,0,4225,4302,4292,8,4285,4290,4289,0,4286,4296,4300,8,4293,4298,4297,0,4294,4304,4285,8,4301,4306,4305,0,4209,4324,4318,8,4309,4314,4313,0,4322,4376,4310,8,4326,4352,4316,8,4309,4328,4320,8,4325,4346,4336,8,4329,4334,4333,0,4330,4340,4344,8,4337,4342,4341,0,4338,4348,4329,8,4345,4350,4349,0,4321,4370,4360,8,4353,4358,4357,0,4354,4364,4368,8,4361,4366,4365,0,4362,4372,4353,8,4369,4374,4373,0,4317,4380,4384,8,4377,4382,4381,0,4378,4394,4392,8,4385,4390,4389,0,4386,4396,4385,8,4393,4398,4397,0,4205,4416,4410,8,4401,4406,4405,0,4414,4468,4402,8,4418,4444,4408,8,4401,4420,4412,8,4417,4424,4428,8,4421,4426,4425,0,4422,4438,4436,8,4429,4434,4433,0,4430,4440,4429,8,4437,4442,4441,0,4413,4448,4452,8,4445,4450,4449,0,4446,4456,4460,8,4453,4458,4457,0,4454,4462,4461,8,4461,4466,4465,0,4409,4472,4476,8,4469,4474,4473,0,4470,4480,4484,8,4477,4482,4481,0,4478,4486,4485,8,4485,4490,4489,0,4498,4814,281,8,4500,4810,4492,8,4496,4528,4508,8,4501,4506,4505,0,4502,4517,4518,8,4509,4514,4513,0,4522,4509,4510,8,4526,4716,4516,8,4530,4624,4520,8,4501,4532,4524,8,4529,4548,4542,8,4533,4538,4537,0,4546,4600,4534,8,4550,4576,4540,8,4533,4552,4544,8,4549,4556,4560,8,4553,4558,4557,0,4554,4570,4568,8,4561,4566,4565,0,4562,4572,4561,8,4569,4574,4573,0,4545,4580,4584,8,4577,4582,4581,0,4578,4588,4592,8,4585,4590,4589,0,4586,4594,4593,8,4593,4598,4597,0,4541,4618,4608,8,4601,4606,4605,0,4602,4612,4616,8,4609,4614,4613,0,4610,4620,4601,8,4617,4622,4621,0,4525,4640,4634,8,4625,4630,4629,0,4638,4692,4626,8,4642,4668,4632,8,4625,4644,4636,8,4641,4662,4652,8,4645,4650,4649,0,4646,4656,4660,8,4653,4658,4657,0,4654,4664,4645,8,4661,4666,4665,0,4637,4686,4676,8,4669,4674,4673,0,4670,4680,4684,8,4677,4682,4681,0,4678,4688,4669,8,4685,4690,4689,0,4633,4696,4700,8,4693,4698,4697,0,4694,4710,4708,8,4701,4706,4705,0,4702,4712,4701,8,4709,4714,4713,0,4521,4732,4726,8,4717,4722,4721,0,4730,4784,4718,8,4734,4760,4724,8,4717,4736,4728,8,4733,4740,4744,8,4737,4742,4741,0,4738,4754,4752,8,4745,4750,4749,0,4746,4756,4745,8,4753,4758,4757,0,4729,4764,4768,8,4761,4766,4765,0,4762,4772,4776,8,4769,4774,4773,0,4770,4778,4777,8,4777,4782,4781,0,4725,4788,4792,8,4785,4790,4789,0,4786,4796,4800,8,4793,4798,4797,0,4794,4802,4801,8,4801,4806,4805,0,257,4177,4497,184,249,4181,4493,192,4822,5449,277,8,4824,5453,4816,8,4820,4852,4832,8,4825,4830,4829,0,4826,4841,4842,8,4833,4838,4837,0,4846,4833,4834,8,4850,5040,4840,8,4854,4948,4844,8,4825,4856,4848,8,4853,4872,4866,8,4857,4862,4861,0,4870,4924,4858,8,4874,4900,4864,8,4857,4876,4868,8,4873,4880,4884,8,4877,4882,4881,0,4878,4894,4892,8,4885,4890,4889,0,4886,4896,4885,8,4893,4898,4897,0,4869,4904,4908,8,4901,4906,4905,0,4902,4912,4916,8,4909,4914,4913,0,4910,4918,4917,8,4917,4922,4921,0,4865,4942,4932,8,4925,4930,4929,0,4926,4936,4940,8,4933,4938,4937,0,4934,4944,4925,8,4941,4946,4945,0,4849,4964,4958,8,4949,4954,4953,0,4962,5016,4950,8,4966,4992,4956,8,4949,4968,4960,8,4965,4986,4976,8,4969,4974,4973,0,4970,4980,4984,8,4977,4982,4981,0,4978,4988,4969,8,4985,4990,4989,0,4961,5010,5000,8,4993,4998,4997,0,4994,5004,5008,8,5001,5006,5005,0,5002,5012,4993,8,5009,5014,5013,0,4957,5020,5024,8,5017,5022,5021,0,5018,5034,5032,8,5025,5030,5029,0,5026,5036,5025,8,5033,5038,5037,0,4845,5056,5050,8,5041,5046,5045,0,5054,5108,5042,8,5058,5084,5048,8,5041,5060,5052,8,5057,5064,5068,8,5061,5066,5065,0,5062,5078,5076,8,5069,5074,5073,0,5070,5080,5069,8,5077,5082,5081,0,5053,5088,5092,8,5085,5090,5089,0,5086,5096,5100,8,5093,5098,5097,0,5094,5102,5101,8,5101,5106,5105,0,5049,5112,5116,8,5109,5114,5113,0,5110,5120,5124,8,5117,5122,5121,0,5118,5126,5125,8,5125,5130,5129,0,5138,5454,273,8,5140,5450,5132,8,5136,5168,5148,8,5141,5146,5145,0,5142,5157,5158,8,5149,5154,5153,0,5162,5149,5150,8,5166,5356,5156,8,5170,5264,5160,8,5141,5172,5164,8,5169,5188,5182,8,5173,5178,5177,0,5186,5240,5174,8,5190,5216,5180,8,5173,5192,5184,8,5189,5196,5200,8,5193,5198,5197,0,5194,5210,5208,8,5201,5206,5205,0,5202,5212,5201,8,5209,5214,5213,0,5185,5220,5224,8,5217,5222,5221,0,5218,5228,5232,8,5225,5230,5229,0,5226,5234,5233,8,5233,5238,5237,0,5181,5258,5248,8,5241,5246,5245,0,5242,5252,5256,8,5249,5254,5253,0,5250,5260,5241,8,5257,5262,5261,0,5165,5280,5274,8,5265,5270,5269,0,5278,5332,5266,8,5282,5308,5272,8,5265,5284,5276,8,5281,5302,5292,8,5285,5290,5289,0,5286,5296,5300,8,5293,5298,5297,0,5294,5304,5285,8,5301,5306,5305,0,5277,5326,5316,8,5309,5314,5313,0,5310,5320,5324,8,5317,5322,5321,0,5318,5328,5309,8,5325,5330,5329,0,5273,5336,5340,8,5333,5338,5337,0,5334,5350,5348,8,5341,5346,5345,0,5342,5352,5341,8,5349,5354,5353,0,5161,5372,5366,8,5357,5362,5361,0,5370,5424,5358,8,5374,5400,5364,8,5357,5376,5368,8,5373,5380,5384,8,5377,5382,5381,0,5378,5394,5392,8,5385,5390,5389,0,5386,5396,5385,8,5393,5398,5397,0,5369,5404,5408,8,5401,5406,5405,0,5402,5412,5416,8,5409,5414,5413,0,5410,5418,5417,8,5417,5422,5421,0,5365,5428,5432,8,5425,5430,5429,0,5426,5436,5440,8,5433,5438,5437,0,5434,5442,5441,8,5441,5446,5445,0,145,4817,5137,200,137,4821,5133,208,1,5524,5466,8,5457,5462,5461,0,5470,5888,5458,8,5474,5864,5464,8,5478,5840,5468,8,5482,5816,5472,8,5486,5792,5476,8,5490,5768,5480,8,5494,5744,5484,8,5498,5720,5488,8,5502,5696,5492,8,5506,5672,5496,8,5510,5648,5500,8,5514,5624,5504,8,5518,5600,5508,8,5522,5576,5512,8,5526,5552,5516,8,5457,5528,5520,8,5525,5546,5536,8,5529,5534,5533,0,5530,5540,5544,8,5537,5542,5541,0,5538,5548,5529,8,5545,5550,5549,0,5521,5570,5560,8,5553,5558,5557,0,5554,5564,5568,8,5561,5566,5565,0,5562,5572,5553,8,5569,5574,5573,0,5517,5580,5584,8,5577,5582,5581,0,5578,5594,5592,8,5585,5590,5589,0,5586,5596,5585,8,5593,5598,5597,0,5513,5604,5608,8,5601,5606,5605,0,5602,5612,5616,8,5609,5614,5613,0,5610,5618,5617,8,5617,5622,5621,0,5509,5642,5632,8,5625,5630,5629,0,5626,5636,5640,8,5633,5638,5637,0,5634,5644,5625,8,5641,5646,5645,0,5505,5652,5656,8,5649,5654,5653,0,5650,5666,5664,8,5657,5662,5661,0,5658,5668,5657,8,5665,5670,5669,0,5501,5676,5680,8,5673,5678,5677,0,5674,5690,5688,8,5681,5686,5685,0,5682,5692,5681,8,5689,5694,5693,0,5497,5700,5704,8,5697,5702,5701,0,5698,5708,5712,8,5705,5710,5709,0,5706,5714,5713,8,5713,5718,5717,0,5493,5738,5728,8,5721,5726,5725,0,5722,5732,5736,8,5729,5734,5733,0,5730,5740,5721,8,5737,5742,5741,0,5489,5748,5752,8,5745,5750,5749,0,5746,5762,5760,8,5753,5758,5757,0,5754,5764,5753,8,5761,5766,5765,0,5485,5772,5776,8,5769,5774,5773,0,5770,5780,5784,8,5777,5782,5781,0,5778,5786,5785,8,5785,5790,5789,0,5481,5796,5800,8,5793,5798,5797,0,5794,5804,5808,8,5801,5806,5805,0,5802,5810,5809,8,5809,5814,5813,0,5477,5834,5824,8,5817,5822,5821,0,5818,5828,5832,8,5825,5830,5829,0,5826,5836,5817,8,5833,5838,5837,0,5473,5858,5848,8,5841,5846,5845,0,5842,5852,5856,8,5849,5854,5853,0,5850,5860,5841,8,5857,5862,5861,0,5469,5868,5872,8,5865,5870,5869,0,5866,5882,5880,8,5873,5878,5877,0,5874,5884,5873,8,5881,5886,5885,0,5465,5892,5896,8,5889,5894,5893,0,5890,5900,5904,8,5897,5902,5901,0,5898,5906,5905,8,5905,5910,5909,0};
  Net net = makeNet(4000000000, init, sizeof(init) / sizeof(Word));
  reduce_(&net);
  printf("%d", checksum(&net));

}
//const Wire = (node, port) => (node << 2) | port;
//const node = wire => wire >>> 2;
//const port = wire => wire & 3;
//const flip = (mem, w) => mem[node(w) * 4 + port(w)];
//const Node = (mem, kind) => {
  //const node = mem.length / 4;
  //mem.push(Wire(node,0), Wire(node,1), Wire(node,2), kind << 3);
  //return node;
//}
//const kind = (mem, node) => (mem[node * 4 + 3] >>> 3);
//const exit = (mem, node) => (mem[node * 4 + 3] >>> 1) & 3;
//const used = (mem, node) => mem[node * 4 + 3] & 1;
//const setExit = (mem, node, exit) => mem[node * 4 + 3] = mem[node * 4 + 3] & 0xFFFFFFF9 | (exit << 1);
//const setUsed = (mem, node) => mem[node * 4 + 3] = mem[node * 4 + 3] | 1;
//const link = (mem, a, b) => { mem[node(a) * 4 + port(a)] = b; mem[node(b) * 4 + port(b)] = a; }
//const rewrite = (mem, x, y) => {
  //if (kind(mem,x) === kind(mem,y)){
    //link(mem, flip(mem,Wire(x,1)), flip(mem,Wire(y,1)));
    //link(mem, flip(mem,Wire(x,2)), flip(mem,Wire(y,2)));
  //} else {
    //var x1 = Node(mem,kind(mem,x)), x2 = Node(mem,kind(mem,x));
    //var y1 = Node(mem,kind(mem,y)), y2 = Node(mem,kind(mem,y));
    //link(mem, flip(mem,Wire(y1,0)), flip(mem,Wire(x,1)));
    //link(mem, flip(mem,Wire(y2,0)), flip(mem,Wire(x,2)));
    //link(mem, flip(mem,Wire(x1,0)), flip(mem,Wire(y,1)));
    //link(mem, flip(mem,Wire(x2,0)), flip(mem,Wire(y,2)));
    //link(mem, flip(mem,Wire(x1,1)), flip(mem,Wire(y1,1)));
    //link(mem, flip(mem,Wire(x1,2)), flip(mem,Wire(y2,1)));
    //link(mem, flip(mem,Wire(x2,1)), flip(mem,Wire(y1,2)));
    //link(mem, flip(mem,Wire(x2,2)), flip(mem,Wire(y2,2)));
  //}
//}

//const reduce = (net) => {
  //let visit = [net.ref];
  //let prev, next, back;
  //let steps = 0, rules = 0;
  //while (visit.length > 0) {
    //prev = visit.pop();
    //next = flip(net.mem,prev);
    //prev = flip(net.mem,next);
    //if (used(net.mem,node(prev)))
      //continue;
    //if (port(prev) === 0) {
      //if (port(next) === 0 && !(node(next) === node(prev))){ 
        //back = flip(net.mem,Wire(node(next),exit(net.mem,node(next))));
        //rewrite(net.mem,node(next),node(prev));
        //visit.push(flip(net.mem,back));
        //++rules;
      //} else {
        //setUsed(net.mem,node(prev));
        //visit.push(flip(net.mem,Wire(node(prev),2)));
        //visit.push(flip(net.mem,Wire(node(prev),1)));
      //};
    //} else {
      //setExit(net.mem,node(prev),port(prev));
      //visit.push(flip(net.mem,Wire(node(prev),0)));
    //}
    //++steps;
  //}
  //console.log("...", steps, rules);
  //return net;
//}


//module.exports = {
  //reduce: reduce,
  //Node: Node,
  //link: link,
  //flip: flip,
  //kind: kind,
  //Wire: Wire,
  //node: node,
  //port: port
//};
